context:
  name: apple-sys
  version: "0.2.0"

  frameworks: ${{ [
          AGL,
          AVFAudio,
          AVFoundation,
          AVKit,
          AVRouting,
          Accelerate,
          Accessibility,
          Accounts,
          AdServices,
          AdSupport,
          AddressBook,
          AppIntents,
          AppKit,
          AppTrackingTransparency,
          AppleScriptKit,
          AppleScriptObjC,
          ApplicationServices,
          AudioToolbox,
          AudioUnit,
          AudioVideoBridging,
          AuthenticationServices,
          AutomaticAssessmentConfiguration,
          Automator,
          BackgroundAssets,
          BackgroundTasks,
          BusinessChat,
          CFNetwork,
          CalendarStore,
          CallKit,
          Carbon,
          ClassKit,
          CloudKit,
          Cocoa,
          Collaboration,
          ColorSync,
          Contacts,
          ContactsUI,
          CoreAudio,
          CoreAudioKit,
          CoreBluetooth,
          CoreData,
          CoreFoundation,
          CoreGraphics,
          CoreHaptics,
          CoreImage,
          CoreLocation,
          CoreMIDI,
          CoreML,
          CoreMedia,
          CoreMediaIO,
          CoreMotion,
          CoreServices,
          CoreSpotlight,
          CoreTelephony,
          CoreText,
          CoreTransferable,
          CoreVideo,
          CoreWLAN,
          CryptoTokenKit,
          DVDPlayback,
          DataDetection,
          DeviceCheck,
          DirectoryService,
          DiscRecording,
          DiscRecordingUI,
          DiskArbitration,
          EventKit,
          ExceptionHandling,
          ExecutionPolicy,
          ExposureNotification,
          ExtensionFoundation,
          ExtensionKit,
          ExternalAccessory,
          FileProvider,
          FileProviderUI,
          FinderSync,
          ForceFeedback,
          Foundation,
          GLKit,
          GLUT,
          GSS,
          GameController,
          GameKit,
          GameplayKit,
          HealthKit,
          Hypervisor,
          ICADevices,
          IMServicePlugIn,
          IOBluetooth,
          IOBluetoothUI,
          IOKit,
          IOSurface,
          IOUSBHost,
          IdentityLookup,
          ImageCaptureCore,
          ImageIO,
          InputMethodKit,
          InstallerPlugins,
          InstantMessage,
          Intents,
          IntentsUI,
          JavaNativeFoundation,
          JavaRuntimeSupport,
          JavaScriptCore,
          Kerberos,
          KernelManagement,
          LDAP,
          LatentSemanticMapping,
          LinkPresentation,
          LocalAuthentication,
          LocalAuthenticationEmbeddedUI,
          MLCompute,
          MailKit,
          MapKit,
          Matter,
          MediaAccessibility,
          MediaLibrary,
          MediaPlayer,
          MediaToolbox,
          Metal,
          MetalFX,
          MetalKit,
          # MetalPerformanceShaders,  -- exceed max arg
          # MetalPerformanceShadersGraph,  -- exceed max arg
          MetricKit,
          ModelIO,
          MultipeerConnectivity,
          NaturalLanguage,
          NearbyInteraction,
          NetFS,
          Network,
          NetworkExtension,
          NotificationCenter,
          OSAKit,
          OSLog,
          OpenAL,
          OpenCL,
          OpenDirectory,
          OpenGL,
          PCSC,
          PDFKit,
          PHASE,
          ParavirtualizedGraphics,
          PassKit,
          PencilKit,
          Photos,
          PhotosUI,
          PreferencePanes,
          PushKit,
          Quartz,
          QuartzCore,
          QuickLook,
          QuickLookThumbnailing,
          QuickLookUI,
          ReplayKit,
          SafariServices,
          SafetyKit,
          SceneKit,
          # ScreenCaptureKit,  -- failing on CI env
          ScreenSaver,
          ScreenTime,
          ScriptingBridge,
          Security,
          SecurityFoundation,
          SecurityInterface,
          SensorKit,
          ServiceManagement,
          SharedWithYou,
          SharedWithYouCore,
          ShazamKit,
          Social,
          SoundAnalysis,
          Speech,
          SpriteKit,
          StoreKit,
          SwiftUI,
          SyncServices,
          SystemConfiguration,
          SystemExtensions,
          TWAIN,
          Tcl,
          ThreadNetwork,
          UniformTypeIdentifiers,
          UserNotifications,
          UserNotificationsUI,
          VideoDecodeAcceleration,
          VideoSubscriberAccount,
          VideoToolbox,
          Virtualization,
          Vision,
          VisionKit,
          # WebKit,  -- exceed max arg
          WidgetKit,
          iTunesLibrary,
          vmnet                
    ] | join(' ') }}

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/youknowone/apple-sys/archive/refs/tags/${{ version }}.tar.gz
  sha256: 9654f2bda892c365888c0d826267cf3e867834d4d45a3f61b0175aaded7ec671
  patches:
    - if: osx
      then:
        - patches/conda-sdk-selection.patch

build:
  number: 0
  skip:
    - linux
    - win

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib("c") }}
    - ${{ compiler('rust') }}
    - cargo-bundle-licenses
  host:
    - setuptools-rust

tests:
  - package_contents:
      files:
        - if: linux or osx
          then:
            - bin/bindgen
          else:
            - bin/bindgen.exe
  - script:
      - if: linux or osx
        then:
          - bindgen --help
        else:
          - bindgen.exe --help

about:
  homepage: https://github.com/youknowone/apple-sys
  summary: 'The auto-managed -sys crate for Apple platforms.'
  description: |
    The auto-managed -sys crate for Apple platforms using
    bindgen directly from build environment.
  license: BSD-2-Clause
  license_file:
    - LICENSE
  repository: https://github.com/youknowone/apple-sys

extra:
  recipe-maintainers:
    - MementoRC
